# Device Registry - IoT Node Configuration
# Defines all devices in the Imperium network including simulated nodes.

devices:
  # ── Hardware Node 1: ESP32 + MH-Z19 CO2 Sensor ─────────────
  esp32-mhz19-1:
    type: co2_sensor
    model: MH-Z19B
    description: "ESP32 with MH-Z19 CO2 sensor - Indoor air quality monitoring"
    capabilities:
      - mqtt
      - co2_monitoring
      - temperature
      - calibration
      - prometheus_metrics
    qos_profile: high_priority
    priority_level: 8
    default_publish_interval: 5000 # milliseconds
    mqtt_topics:
      telemetry: "imperium/devices/esp32-mhz19-1/telemetry"
      control: "imperium/devices/esp32-mhz19-1/control"
      config: "imperium/devices/esp32-mhz19-1/config"
      status: "imperium/devices/esp32-mhz19-1/status"
    network:
      ip_address: "10.218.189.218"
      max_bandwidth: "1mbps"
      min_latency: "200ms"
      metrics_port: 8080
    sensor_specs:
      measurement_range: "0-5000 ppm"
      accuracy: "±50ppm + 5%"
      warmup_time: "3 minutes"
      response_time: "< 60 seconds"
      detection_ranges:
        - 2000
        - 5000
        - 10000
      abc_logic: enabled
    location: "office-main"
    alerts:
      high_co2: 1000  # ppm - ventilation recommended
      critical_co2: 2000  # ppm - immediate action required

  # ── Hardware Node 2: ESP32 + INMP441 Audio Sensor ───────────
  esp32-audio-1:
    type: audio_sensor
    description: "ESP32 with I2S microphone - Audio capture node"
    capabilities:
      - mqtt
      - audio_stream
      - prometheus_metrics
      - policy_control
    qos_profile: high_priority
    priority_level: 8
    default_sampling_rate: 16000 # Hz (audio sample rate)
    mqtt_topics:
      audio: "iot/esp32-audio-1/audio"
      telemetry: "iot/esp32-audio-1/telemetry"
      control: "iot/esp32-audio-1/control"
      status: "iot/esp32-audio-1/status"
      metadata: "iot/esp32-audio-1/metadata"
    network:
      ip_address: "10.218.189.218"
      max_bandwidth: "500kbps"
      min_latency: "100ms"
      metrics_port: 8080
    audio_config:
      channels: 1
      bits_per_sample: 16
      frame_size: 480 # samples per frame
      buffer_count: 4
    location: "raspberry-pi-network"

  # ── Hardware Node 3: ESP32-CAM with OV2640 ──────────────────
  esp32-cam-1:
    type: camera
    description: "ESP32-CAM with OV2640 - Image capture node"
    capabilities:
      - mqtt
      - image_capture
      - prometheus_metrics
      - policy_control
    qos_profile: high_priority
    priority_level: 8
    default_resolution: "SVGA" # 800x600
    default_quality: 10 # JPEG quality (0-63, lower is better)
    default_brightness: 0 # -2 to 2
    default_capture_interval: 5000 # ms (5 seconds)
    mqtt_topics:
      images: "iot/esp32-cam-1/images"
      telemetry: "iot/esp32-cam-1/telemetry"
      control: "iot/esp32-cam-1/control"
      status: "iot/esp32-cam-1/status"
    network:
      ip_address: "10.218.189.80"
      max_bandwidth: "1mbps"
      min_latency: "200ms"
      metrics_port: 80
    camera_config:
      resolutions:
        - "QVGA"   # 320x240
        - "VGA"    # 640x480
        - "SVGA"   # 800x600 (default)
        - "XGA"    # 1024x768
        - "HD"     # 1280x720
        - "SXGA"   # 1280x1024
        - "UXGA"   # 1600x1200
      quality_range: [0, 63]
      brightness_range: [-2, 2]
      min_capture_interval: 100 # ms (10 FPS max)
      max_capture_interval: 60000 # ms (1 frame per minute min)
    location: "raspberry-pi-network"

  # ── Docker Simulated Nodes (node-1 through node-10) ────────
  # IPs are dynamically assigned by Docker; the network.py
  # DEVICE_REGISTRY auto-discovers them at startup.
  # These entries provide default values for metric seeding.
  node-1:
    type: simulated_sensor
    description: "Docker simulated IoT node 1"
    capabilities: [mqtt, telemetry]
    qos_profile: medium_priority
    priority_level: 5
    network:
      max_bandwidth: "5mbps"
      min_latency: "50ms"

  node-2:
    type: simulated_sensor
    description: "Docker simulated IoT node 2"
    capabilities: [mqtt, telemetry]
    qos_profile: medium_priority
    priority_level: 5
    network:
      max_bandwidth: "5mbps"
      min_latency: "50ms"

  node-3:
    type: simulated_sensor
    description: "Docker simulated IoT node 3"
    capabilities: [mqtt, telemetry]
    qos_profile: medium_priority
    priority_level: 5
    network:
      max_bandwidth: "5mbps"
      min_latency: "50ms"

  node-4:
    type: simulated_sensor
    description: "Docker simulated IoT node 4"
    capabilities: [mqtt, telemetry]
    qos_profile: medium_priority
    priority_level: 5
    network:
      max_bandwidth: "5mbps"
      min_latency: "50ms"

  node-5:
    type: simulated_sensor
    description: "Docker simulated IoT node 5"
    capabilities: [mqtt, telemetry]
    qos_profile: medium_priority
    priority_level: 5
    network:
      max_bandwidth: "5mbps"
      min_latency: "50ms"

  node-6:
    type: simulated_sensor
    description: "Docker simulated IoT node 6"
    capabilities: [mqtt, telemetry]
    qos_profile: medium_priority
    priority_level: 5
    network:
      max_bandwidth: "5mbps"
      min_latency: "50ms"

  node-7:
    type: simulated_sensor
    description: "Docker simulated IoT node 7"
    capabilities: [mqtt, telemetry]
    qos_profile: medium_priority
    priority_level: 5
    network:
      max_bandwidth: "5mbps"
      min_latency: "50ms"

  node-8:
    type: simulated_sensor
    description: "Docker simulated IoT node 8"
    capabilities: [mqtt, telemetry]
    qos_profile: medium_priority
    priority_level: 5
    network:
      max_bandwidth: "5mbps"
      min_latency: "50ms"

  node-9:
    type: simulated_sensor
    description: "Docker simulated IoT node 9"
    capabilities: [mqtt, telemetry]
    qos_profile: medium_priority
    priority_level: 5
    network:
      max_bandwidth: "5mbps"
      min_latency: "50ms"

  node-10:
    type: simulated_sensor
    description: "Docker simulated IoT node 10"
    capabilities: [mqtt, telemetry]
    qos_profile: medium_priority
    priority_level: 5
    network:
      max_bandwidth: "5mbps"
      min_latency: "50ms"

# QoS Profiles Definition
qos_profiles:
  high_priority:
    mqtt_qos: 2 # Exactly once delivery
    priority: 9
    max_latency_ms: 50
    min_throughput_mbps: 1

  medium_priority:
    mqtt_qos: 1 # At least once delivery
    priority: 5
    max_latency_ms: 150
    min_throughput_mbps: 0.5

  low_priority:
    mqtt_qos: 0 # At most once delivery
    priority: 2
    max_latency_ms: 500
    min_throughput_mbps: 0.1

  bandwidth_limited:
    mqtt_qos: 1
    priority: 4
    max_latency_ms: 200
    max_bandwidth_mbps: 2 # Hard limit

  event_driven:
    mqtt_qos: 2
    priority: 8
    max_latency_ms: 50
    burst_mode: true

# Device Type Definitions
device_types:
  temperature_sensor:
    default_metrics:
      - temperature
      - timestamp
    sampling_rate_range: [1, 60] # seconds

  camera:
    default_metrics:
      - frame_rate
      - resolution
      - bandwidth_usage
    sampling_rate_range: [1, 30] # FPS

  environmental_sensor:
    default_metrics:
      - humidity
      - pressure
      - air_quality
      - temperature
    sampling_rate_range: [5, 300]

  motion_sensor:
    default_metrics:
      - motion_detected
      - last_trigger_time
    event_based: true
