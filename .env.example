# Environment Configuration - TEMPLATE FILE
# ⚠️ SECURITY WARNING: Copy this file to .env and update all secrets
# ⚠️ NEVER commit .env files with real credentials to version control
# ⚠️ Generate strong secrets using: openssl rand -hex 32

# MQTT Broker Configuration
MQTT_BROKER_HOST=localhost
MQTT_BROKER_PORT=1883
MQTT_USERNAME=your-mqtt-username-here
MQTT_PASSWORD=your-mqtt-password-here
MQTT_USE_TLS=false
MQTT_CA_CERT_PATH=/path/to/ca.crt
MQTT_CLIENT_CERT_PATH=/path/to/client.crt
MQTT_CLIENT_KEY_PATH=/path/to/client.key

# Prometheus Configuration
PROMETHEUS_URL=http://localhost:9090
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_RETENTION_DAYS=15

# Grafana Configuration
GRAFANA_URL=http://localhost:3000
GRAFANA_ADMIN_USER=admin
# ⚠️ CHANGE THIS: Use strong password (min 16 chars, mixed case, numbers, symbols)
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD

# API Configuration
API_HOST=0.0.0.0
API_PORT=5000
API_DEBUG=false  # ALWAYS false in production
# ⚠️ CRITICAL: Generate with: python -c "import secrets; print(secrets.token_hex(32))"
API_SECRET_KEY=GENERATE_RANDOM_SECRET_KEY_HERE
API_CORS_ORIGINS=http://localhost:3000

# Authentication (JWT) - SECURITY CRITICAL
JWT_ENABLED=true
# ⚠️ CRITICAL: Generate with: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=GENERATE_RANDOM_JWT_SECRET_KEY_HERE
JWT_EXPIRATION_HOURS=24
JWT_ALGORITHM=HS256

# Network Enforcement
NETWORK_INTERFACE=eth0
NETWORK_FALLBACK_INTERFACE=wlan0
ENFORCEMENT_DRY_RUN=false  # Set true to simulate without actual tc commands
ENFORCEMENT_TIMEOUT_MS=5000

# Device Configuration
CONFIG_DEVICES_PATH=config/devices.yaml
CONFIG_INTENT_GRAMMAR_PATH=config/intent_grammar.yaml
CONFIG_POLICY_TEMPLATES_PATH=config/policy_templates.yaml

# Feedback Loop
FEEDBACK_ENABLED=true
FEEDBACK_CHECK_INTERVAL_SECONDS=30
FEEDBACK_VIOLATION_THRESHOLD=3  # Number of violations before auto-adjustment
FEEDBACK_HISTORY_SIZE=1000

# Persistence
DATABASE_TYPE=sqlite  # Options: sqlite, postgresql
# ⚠️ SECURITY: For production, use PostgreSQL with encrypted connections
DATABASE_URL=sqlite:///data/imperium.db
DATABASE_POOL_SIZE=5
DATABASE_ECHO=false

# PostgreSQL (if DATABASE_TYPE=postgresql)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=imperium
POSTGRES_USER=imperium
# ⚠️ CHANGE THIS: Use strong password (min 16 chars)
POSTGRES_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD

# Logging
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=logs/imperium.log
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Monitoring
METRICS_ENABLED=true
METRICS_PORT=8000
METRICS_PATH=/metrics

# System Limits
MAX_INTENTS=1000
MAX_POLICIES=5000
MAX_DEVICES=100
POLICY_ENFORCEMENT_TIMEOUT=500  # milliseconds

# Development
DEBUG=false  # ALWAYS false in production
TESTING=false
MOCK_NETWORK_ENFORCEMENT=false  # Set true on non-Linux systems
MOCK_MQTT_BROKER=false

# Security - IMPORTANT
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
ALLOWED_HOSTS=localhost,127.0.0.1
CORS_ALLOW_CREDENTIALS=true

# Raspberry Pi Specific
RPI_CPU_THRESHOLD=60  # Percentage
RPI_MEMORY_THRESHOLD=70  # Percentage
RPI_TEMP_THRESHOLD=70  # Celsius

# ====================================================================================
# SECURITY CHECKLIST FOR PRODUCTION:
# ====================================================================================
# [ ] Generate new API_SECRET_KEY: python -c "import secrets; print(secrets.token_hex(32))"
# [ ] Generate new JWT_SECRET_KEY: python -c "import secrets; print(secrets.token_hex(32))"
# [ ] Change GRAFANA_ADMIN_PASSWORD to strong password
# [ ] Set POSTGRES_PASSWORD if using PostgreSQL
# [ ] Set MQTT_USERNAME and MQTT_PASSWORD
# [ ] Set API_DEBUG=false
# [ ] Set DEBUG=false
# [ ] Enable JWT_ENABLED=true
# [ ] Enable RATE_LIMIT_ENABLED=true
# [ ] Configure ALLOWED_HOSTS with your domain/IP
# [ ] Set up MQTT TLS certificates if MQTT_USE_TLS=true
# [ ] Never commit .env file to git (check .gitignore)
# [ ] Use environment variables in CI/CD (not .env files)
# [ ] Rotate secrets quarterly or after any security incident
# ====================================================================================
RPI_THROTTLE_ON_OVERHEAT=true

# Feature Flags
FEATURE_NLTP_PARSER=false  # Use NLTK instead of regex
FEATURE_AUTO_FEEDBACK=true
FEATURE_POLICY_LEARNING=false  # ML-based policy optimization
FEATURE_WEB_UI=false
FEATURE_API_DOCS=true  # Swagger/OpenAPI
